{"ast":null,"code":"import _regeneratorRuntime from \"/src/entra/ex-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _objectSpread from \"/src/entra/ex-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _asyncToGenerator from \"/src/entra/ex-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/src/entra/ex-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/src/entra/ex-frontend/src/ClientNewBooking/NewBooking.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport moment from 'moment';\nimport * as constants from '../Constants';\nimport auth0Client from '../Auth';\nimport Alert from 'react-s-alert';\nvar FORMAT = 'DD.MM.YY HH:mm';\nvar ROOM_ID = 1272543272;\n\nfunction NewBooking(o) {\n  var originalFromTime = moment().startOf('hour').add(1, 'hour');\n\n  var _useState = useState(originalFromTime),\n      _useState2 = _slicedToArray(_useState, 2),\n      fromTime = _useState2[0],\n      setFromTime = _useState2[1];\n\n  var originalToTime = moment().startOf('hour').add(2, 'hour');\n\n  var _useState3 = useState(originalToTime),\n      _useState4 = _slicedToArray(_useState3, 2),\n      toTime = _useState4[0],\n      setToTime = _useState4[1];\n\n  var standard = {\n    \"fromTime\": \"2020-04-17T20:30:00Z\",\n    \"toTime\": \"2020-04-17T21:00:00Z\",\n    \"room\": {\n      \"resourceId\": ROOM_ID\n    },\n    \"participantsMap\": {},\n    \"participantsFoodMap\": {},\n    \"participantsKeyMap\": {},\n    \"host\": {\n      \"id\": \"b1fbb65d-5a27-4eab-9fb5-8c7f4bf8a414\",\n      \"firstName\": \"Firstname\"\n    }\n  };\n\n  var postBooking = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var body, result, data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (auth0Client.isAuthenticated()) {\n                _context.next = 3;\n                break;\n              }\n\n              Alert.error('Login required');\n              return _context.abrupt(\"return\");\n\n            case 3:\n              console.log(\"Posting a booking request for: \");\n              body = _objectSpread({}, standard, {\n                fromTime: fromTime.toISOString(),\n                toTime: toTime.toISOString()\n              });\n              ;\n              _context.next = 8;\n              return fetch(\"\".concat(constants.APP_API_URL, \"/booking/create\"), {\n                method: 'POST',\n                headers: {\n                  'Accept': 'application/json',\n                  'Content-Type': 'application/json',\n                  'Authorization': \"Bearer \".concat(auth0Client.getAccessToken())\n                },\n                body: JSON.stringify(body)\n              });\n\n            case 8:\n              result = _context.sent;\n              _context.next = 11;\n              return result.json();\n\n            case 11:\n              data = _context.sent;\n              o.update(data);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function postBooking() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var update = function update(setter, e) {\n    var newTime = moment(e.target.value, FORMAT);\n    setter(newTime);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }\n  }, \"Book room \", ROOM_ID), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }\n  }, \"Suggested starting time: \", originalFromTime.format(FORMAT), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }, \" Change to (\", FORMAT, \"):\", /*#__PURE__*/React.createElement(\"input\", {\n    onChange: function onChange(e) {\n      return update(setFromTime, e);\n    },\n    type: \"text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 9\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }, \"Suggested ending time: \", originalToTime.format(FORMAT), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }, \" Change to (\", FORMAT, \"):\", /*#__PURE__*/React.createElement(\"input\", {\n    onChange: function onChange(e) {\n      return update(setToTime, e);\n    },\n    type: \"text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }))), /*#__PURE__*/React.createElement(\"p\", {\n    onClick: postBooking,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 32\n    }\n  }, \"Click here to book \", fromTime.format(FORMAT), \" to \", toTime.format(FORMAT))));\n}\n\nexport default NewBooking;","map":{"version":3,"sources":["/src/entra/ex-frontend/src/ClientNewBooking/NewBooking.jsx"],"names":["React","useState","useEffect","moment","constants","auth0Client","Alert","FORMAT","ROOM_ID","NewBooking","o","originalFromTime","startOf","add","fromTime","setFromTime","originalToTime","toTime","setToTime","standard","postBooking","isAuthenticated","error","console","log","body","toISOString","fetch","APP_API_URL","method","headers","getAccessToken","JSON","stringify","result","json","data","update","setter","e","newTime","target","value","format"],"mappings":"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","sourcesContent":["import React, { useState, useEffect }  from 'react'\nimport moment from 'moment'\nimport * as constants from '../Constants'\nimport auth0Client from '../Auth'\nimport Alert from 'react-s-alert';\n\nconst FORMAT = 'DD.MM.YY HH:mm';\nconst ROOM_ID = 1272543272\n\nfunction NewBooking(o) {\n  const originalFromTime = moment().startOf('hour').add(1, 'hour');\n  const [fromTime, setFromTime] = useState(originalFromTime);\n\n  const originalToTime = moment().startOf('hour').add(2, 'hour');\n  const [toTime, setToTime] = useState(originalToTime);\n\n\n  const standard = {\n    \"fromTime\": \"2020-04-17T20:30:00Z\",\n    \"toTime\": \"2020-04-17T21:00:00Z\",\n    \"room\": {\n      \"resourceId\": ROOM_ID\n    },\n    \"participantsMap\": {},\n    \"participantsFoodMap\": {},\n    \"participantsKeyMap\": {},\n    \"host\": {\n         \"id\": \"b1fbb65d-5a27-4eab-9fb5-8c7f4bf8a414\",\n         \"firstName\": \"Firstname\",\n     }\n  };\n\n  const postBooking = async () =>  {\n\n    if (!auth0Client.isAuthenticated()) {\n      Alert.error('Login required');\n      return;\n    }\n\n    console.log(`Posting a booking request for: `)\n\n    let body = {\n      ...standard,\n      fromTime: fromTime.toISOString(),\n      toTime: toTime.toISOString()\n    };\n    ;\n\n    const result = await fetch(`${constants.APP_API_URL}/booking/create`,{\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${auth0Client.getAccessToken()}`\n    },\n      body: JSON.stringify(body)\n    });\n    const data = await result.json();\n    o.update(data)\n  }\n\n  const update = function(setter, e){\n    const newTime = moment(e.target.value, FORMAT)\n    setter(newTime);\n  }\n\n  return (\n    <div>\n      <h3>Book room {ROOM_ID}</h3>\n\n      <div>Suggested starting time: {originalFromTime.format(FORMAT)}\n        <span> Change to ({FORMAT}):\n        <input onChange={(e) => update(setFromTime, e)} type=\"text\"></input>\n        </span>\n      </div>\n      <div>Suggested ending time: {originalToTime.format(FORMAT)}\n        <span> Change to ({FORMAT}):\n        <input onChange={(e) => update(setToTime, e)} type=\"text\"></input>\n        </span>\n      </div>\n      <p onClick={postBooking}><strong>Click here to book {fromTime.format(FORMAT)} to {toTime.format(FORMAT)}</strong></p>\n    </div>\n  );\n}\nexport default NewBooking;\n"]},"metadata":{},"sourceType":"module"}