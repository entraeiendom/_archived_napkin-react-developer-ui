{"ast":null,"code":"import _regeneratorRuntime from \"/src/entra/ex-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/src/entra/ex-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/src/entra/ex-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/src/entra/ex-frontend/src/ClientBookingList/BookingList.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport moment from 'moment';\nimport NewBooking from '../ClientNewBooking/NewBooking';\nimport * as constants from '../Constants';\n\nfunction BookingList() {\n  var _this = this;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      bookings = _useState2[0],\n      setBookings = _useState2[1];\n\n  var _useState3 = useState({}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      lastBooking = _useState4[0],\n      setLastBooking = _useState4[1];\n\n  useEffect(function () {\n    fetchData();\n  }, [lastBooking]);\n\n  var fetchData = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var result, data;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetch(\"\".concat(constants.APP_API_URL, \"/booking/reservations/list\"));\n\n            case 2:\n              result = _context.sent;\n              _context.next = 5;\n              return result.json();\n\n            case 5:\n              data = _context.sent;\n              setBookings(data);\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function fetchData() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(NewBooking, {\n    update: setLastBooking,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 7\n    }\n  }, \"Bookings:\"), /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 7\n    }\n  }, bookings.sort(function (a, b) {\n    return moment(a.fromTime).isAfter(moment(b.fromTime));\n  }).map(function (b, i) {\n    return /*#__PURE__*/React.createElement(\"li\", {\n      key: i,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 17\n      }\n    }, \"Room '\", b.room.name, \"' with resourceId \", b.room.resourceId, \" \"), /*#__PURE__*/React.createElement(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 17\n      }\n    }, \"booked by \", b.host.firstName, \" \"), /*#__PURE__*/React.createElement(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 17\n      }\n    }, \"starting at \", moment(b.fromTime).format('DD.MM.YY HH:mm'), \" \"), /*#__PURE__*/React.createElement(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 17\n      }\n    }, \"ending at \", moment(b.toTime).format('DD.MM.YY HH:mm'), \" \"), /*#__PURE__*/React.createElement(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 17\n      }\n    }, \"(duration: \", moment(b.fromTime).to(moment(b.toTime), true), \") \"));\n  })));\n}\n\nexport default BookingList;","map":{"version":3,"sources":["/src/entra/ex-frontend/src/ClientBookingList/BookingList.jsx"],"names":["React","useState","useEffect","moment","NewBooking","constants","BookingList","bookings","setBookings","lastBooking","setLastBooking","fetchData","fetch","APP_API_URL","result","json","data","sort","a","b","fromTime","isAfter","map","i","room","name","resourceId","host","firstName","format","toTime","to"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA4C,OAA5C;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,UAAP,MAAuB,gCAAvB;AACA,OAAO,KAAKC,SAAZ,MAA2B,cAA3B;;AAIA,SAASC,WAAT,GAAuB;AAAA;;AAAA,kBAEWL,QAAQ,CAAC,EAAD,CAFnB;AAAA;AAAA,MAEdM,QAFc;AAAA,MAEJC,WAFI;;AAAA,mBAGiBP,QAAQ,CAAC,EAAD,CAHzB;AAAA;AAAA,MAGdQ,WAHc;AAAA,MAGDC,cAHC;;AAMnBR,EAAAA,SAAS,CAAC,YAAM;AAEdS,IAAAA,SAAS;AAEV,GAJQ,EAIN,CAACF,WAAD,CAJM,CAAT;;AAMA,MAAME,SAAS;AAAA,wEAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACKC,KAAK,WAAIP,SAAS,CAACQ,WAAd,gCADV;;AAAA;AACVC,cAAAA,MADU;AAAA;AAAA,qBAEGA,MAAM,CAACC,IAAP,EAFH;;AAAA;AAEVC,cAAAA,IAFU;AAGhBR,cAAAA,WAAW,CAACQ,IAAD,CAAX;;AAHgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAATL,SAAS;AAAA;AAAA;AAAA,KAAf;;AAQF,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,UAAD;AAAY,IAAA,MAAM,EAAED,cAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEIH,QAAQ,CACPU,IADD,CACM,UAACC,CAAD,EAAGC,CAAH;AAAA,WAAShB,MAAM,CAACe,CAAC,CAACE,QAAH,CAAN,CAAmBC,OAAnB,CAA2BlB,MAAM,CAACgB,CAAC,CAACC,QAAH,CAAjC,CAAT;AAAA,GADN,EAECE,GAFD,CAEK,UAACH,CAAD,EAAII,CAAJ,EAAU;AACb,wBACE;AAAI,MAAA,GAAG,EAAEA,CAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAaJ,CAAC,CAACK,IAAF,CAAOC,IAApB,wBAA4CN,CAAC,CAACK,IAAF,CAAOE,UAAnD,MADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAiBP,CAAC,CAACQ,IAAF,CAAOC,SAAxB,MAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAmBzB,MAAM,CAACgB,CAAC,CAACC,QAAH,CAAN,CAAmBS,MAAnB,CAA0B,gBAA1B,CAAnB,MAHF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAAiB1B,MAAM,CAACgB,CAAC,CAACW,MAAH,CAAN,CAAiBD,MAAjB,CAAwB,gBAAxB,CAAjB,MAJF,eAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAkB1B,MAAM,CAACgB,CAAC,CAACC,QAAH,CAAN,CAAmBW,EAAnB,CAAsB5B,MAAM,CAACgB,CAAC,CAACW,MAAH,CAA5B,EAAwC,IAAxC,CAAlB,OALF,CADF;AASD,GAZD,CAFJ,CAHF,CADF;AAuBD;;AACD,eAAexB,WAAf","sourcesContent":["import React, { useState, useEffect }  from 'react'\nimport moment from 'moment'\nimport NewBooking from '../ClientNewBooking/NewBooking'\nimport * as constants from '../Constants'\n\n\n\nfunction BookingList() {\n\n  const [bookings, setBookings] = useState([]);\n  const [lastBooking, setLastBooking] = useState({});\n\n\n    useEffect(() => {\n\n      fetchData();\n\n    }, [lastBooking]);\n\n    const fetchData = async () =>  {\n      const result = await fetch(`${constants.APP_API_URL}/booking/reservations/list`);\n      const data = await result.json();\n      setBookings(data);\n    }\n\n\n\n  return (\n    <div>\n      <NewBooking update={setLastBooking} />\n      <h3>Bookings:</h3>\n      <ul>\n        {\n          bookings\n          .sort((a,b) => moment(a.fromTime).isAfter(moment(b.fromTime)))\n          .map((b, i) => {\n            return (\n              <li key={i}>\n                <span>Room '{b.room.name}' with resourceId {b.room.resourceId} </span>\n                <span>booked by {b.host.firstName} </span>\n                <span>starting at {moment(b.fromTime).format('DD.MM.YY HH:mm')} </span>\n                <span>ending at {moment(b.toTime).format('DD.MM.YY HH:mm')} </span>\n                <span>(duration: {moment(b.fromTime).to(moment(b.toTime), true) }) </span>\n              </li>\n            )\n          })\n        }\n      </ul>\n    </div>\n  );\n}\nexport default BookingList;\n"]},"metadata":{},"sourceType":"module"}